{% extends 'lab_base.html' %}

{% block body %}
<!-- modal window content doest work!-->
<div class="modal fade" id="fabInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel"></h4>
      </div>
      	<div class="modal-body">
      		<p>Some more information about our ahhhh-mazing fabrics!</p>
      		<img src="http://38.media.tumblr.com/60d1ffa2d858c6bf69e1f3982169be50/tumblr_nndo2qTxB61uq175to3_500.gif"/>
      	</div>
  	</div>
</div>
</div>



	<div class="row build">
		<form action='/step3' id="fabric-form" method="post">
		<div class="col-xs-6 col-md-4 col-md-offset-1">
			<div class="well">
				<p class="section"> Fabrics</p>
				<ul class="list-group fabrics">
					{% for fabric in fabrics %}
					<li class="list-group-item" id="{{fabric.fabric_id}}">
						<label class="btn pretty"><input type="radio" name="fabric" class="fabric-button" data-extra-text="{{fabric.fabric_description}}" data-image="{{fabric.fabric_thumbnail}}" value="{{fabric.fabric_id}}"> {{fabric.fabric_name}}</label>
					</li>
					{% endfor %} 
				</ul>
				<div class="fabric-error"></div>
				<div id="fabric-details"></div>
			</div>
			
			
		</div>
		<div class="col-xs-6 col-md-4 col-md-offset-1">
			<object class="doll" id="design-object" data="/static/svg/{{session['current_design']['style_svg']}}?no-cache={{time()}}" alt="current design model"></object> 
		</div>
	</div>
	<div class="row">
		<div class="col-md-2 col-md-offset-1">
			<a class="btn-modal" href="javascript:history.back()"> &lt; Step 1 </a>
		</div>
		<div class="col-xs-12 col-md-2 col-md-offset-6">
			<div class="submit">
				<input type="submit" class="btn-editorial" href="/step3" value="Next step please!"/>
			</div>
		</div>

	</div>
	
</form>



<!-- <script src="https://code.jquery.com/jquery.js"></script> -->
<script type="text/javascript" src="static/js/jquery-2.1.4.min.js"></script>
<script src="static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="static/js/step2.js"></script>

<!-- <script> 



$(document).ready( function(){
    ////////GET DATA FROM SERVER////////
	// loads the previous selections via JSON
    $.get('/current-design.json', function (current_design) {
		console.log(current_design);

		$(window).load(function (){
			var obj = document.getElementById("design-object");
			var objData = obj.contentDocument;
			var highWaist = objData.getElementById("highWaist");
			console.log(highWaist);
			var lowWaist = objData.getElementById("lowWaist");
			console.log(current_design.waist_id);

			if(current_design.waist_id == 1){
				highWaist.setAttribute('visibility', 'hidden');
				lowWaist.setAttribute('visibility', 'visible');
			} else {
				highWaist.setAttribute('visibility', 'visible');
				lowWaist.setAttribute('visibility', 'hidden');
			};
		});
	});
	console.log("ready!");
	$('#styles-tab').removeClass('selected');
	$('#fabrics-tab').addClass('selected');

});
///////////////EVENT HANDLERS///////////////

// shows the fabric description when selected
$('.fabric-button').on('change', function (evt){
	$('#description').remove();
	$('.fabrics').removeClass('nope');
	$('.form-error').remove();

	var descriptionText = $(this).data('extra-text');
	var descriptionImg = $(this).data('image');
	$('#fabric-details').append('<img id="fabric-image"/><span id="description" > ' + descriptionText + '</span>');
	$('#fabric-image').attr('src', '/static/images/' + descriptionImg);
}); 

//validates the form 
$('#fabric-form').on('submit', function(evt){
	var fabricSelected = $("input[name='fabric']:checked").length;
	if(fabricSelected == 0) {
	   //Is not Valid
	   evt.preventDefault();
	   $('.fabrics').addClass('nope');
	   $('.fabric-error').append("<p class='form-error'>please select a fabric!</p>");
	}
});


</script> -->

{% endblock %}